# DES3 sample of encryption + decryption in Larky

This sample includes:
1. Larky test `.star` file that checks the result of encrypt + decrypt;
2. Ready-for-use YAML (Inbound Route) that produces the same result as previous script.

## Testing part:

#### 1. Larky test:

To be able to run Larky locally, you'll need to setup your local environment:
https://www.verygoodsecurity.com/docs/larky/test-larky-locally

Example of run:
<img width="1644" alt="image" src="https://github.com/vgs-samples/code-examples/assets/78090218/031137cb-fd77-4c48-9444-0b826dad9650">


#### 2. YAML file:

Upload the YAML to your vault and run (secret here is not real, it was generated by randomizer):
```
curl https://VAULT_ID.sandbox.verygoodproxy.com/post -k \
  -H "Content-type: application/json" \
  -d '{"cardno": "5438898014560229", "cvv": "890", "expirymonth": "09", "expiryyear": "23", "currency": "USD", "country": "US", "suggested_auth": "cpin", "pin": "3310", "amount": "100", "email": "john.wick@domain.com", "firstname": "John", "lastname": "Wick"}'
```

Example of response:
```
"json": {
    "client": "AB6bq600zxhpjG9IR+GwO6Dsm+kecGGXo7uQaEELvI/L+Rorfecadg3labXy6eHg/Jsr9AoyDpzlIRanHt4r83Fmu4bRSVshLnJpNahyMLCvIfa+VLhamTA17FqJfwKHpQLG2JXEB1DgKZxJ6CcNPNEwp06css8nST9C+LlXg+vxY00YV3YYlCsbBX2Hkg6brIpDUV1owzy4FBZbtEkFUMZJhRDWMXqZayuiRZAT8FtgIkibrzLRR064I/0a7fXuGBXV+svr//0uz6ck1iXkXYGjg9lJixbfeCUUVm3SCsxLwVPx46LhOsmApFu8kI4MmxyEjysQYD7s0WZREV43Jw==",
    "decrypted": {
      "amount": "100",
      "cardno": "5438898014560229",
      "country": "US",
      "currency": "USD",
      "cvv": "890",
      "email": "john.wick@domain.com",
      "expirymonth": "09",
      "expiryyear": "23",
      "firstname": "John",
      "lastname": "Wick",
      "pin": "3310",
      "suggested_auth": "cpin"
    },
    "padding": 3
  }
```

<img width="1276" alt="image" src="https://github.com/vgs-samples/code-examples/assets/78090218/f17fdda2-6ed1-4174-9f9f-83d5933cd947">

